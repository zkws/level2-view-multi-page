import{f as C,_ as f,a as S,r as v,c as k,b as s,d as m,t as p,w as x,o as b,e as R,V as y}from"./main-4db38276.js";C("");function w(t){var e=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),g=parseFloat(e[3]||1),n=Math.floor(g*parseInt(e[0])+(1-g)*255),r=Math.floor(g*parseInt(e[1])+(1-g)*255),o=Math.floor(g*parseInt(e[2])+(1-g)*255);return"#"+("0"+n.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)}function u(t,e,g,n){let r=(g-e)/2;var o=255/r,i=0,h=0,a=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(i=255,h=255,a=255):(n=="asc"&&(t-e<r&&(i=o*(t-e),h=255),t-e>=r&&(h=255-(t-e-r)*o<0?0:255-(t-e-r)*o,i=255)),n=="desc"&&(t-e<r&&(h=o*(t-e),i=255),t-e>=r&&(i=255-(t-e-r)*o<0?0:255-(t-e-r)*o,h=255))),i=parseInt(i),h=parseInt(h),a=parseInt(a),w("rgb("+i+","+h+","+a+")")}const A={data(){return{timer:null,currentStkCode:0,targetStkCode:0,updateTime:null,showHighLimit:null,rankWeightMax:0,showCountMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,compositeScoreRankAvgMax:0,weightedOrderBSRateAvgMax:0,transBsRateAvgMax:0,sdRateMax:0,compositeScoreAvgMax:0,rankWeightMin:0,showCountMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,compositeScoreRankAvgMin:0,weightedOrderBSRateAvgMin:0,transBsRateAvgMin:0,sdRateMin:0,compositeScoreAvgMin:0,tableData:[]}},mounted(){this.showHighLimit="不计入",this.currentStkCode=0,this.targetStkCode=0,this.showShort="计入",this.getCScoreRank(),this.timer=setInterval(this.getCScoreRank,6e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:e}){switch(e.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"showCount":return{backgroundColor:u(t.showCount,this.showCountMin,this.showCountMax,"asc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"};case"compositeScoreRankAvg":return{backgroundColor:u(t.compositeScoreRankAvg,this.compositeScoreRankAvgMin,this.compositeScoreRankAvgMax,"desc"),color:"＃C0C0C0"};case"weightedOrderBSRateAvg":return{backgroundColor:u(t.weightedOrderBSRateAvg,this.weightedOrderBSRateAvgMin,this.weightedOrderBSRateAvgMax,"asc"),color:"＃C0C0C0"};case"transBsRateAvg":return{backgroundColor:u(t.transBsRateAvg,this.transBsRateAvgMin,this.transBsRateAvgMax,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:u(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"compositeScoreAvg":return{backgroundColor:u(t.compositeScoreAvg,this.compositeScoreAvgMin,this.compositeScoreAvgMax,"asc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var e=[],g=[],n=[],r=[],o=[],i=[],h=[],a=[],d=[],c=[],l=0;l<t.length;l++)t[l].rankWeight!=null&&e.push(parseFloat(t[l].rankWeight)),t[l].showCount!=null&&g.push(parseFloat(t[l].showCount)),t[l].shortrtn!=null&&t[l].shortrtn!="暂无数据"&&n.push(parseFloat(t[l].shortrtn)),t[l].middlertn!=null&&t[l].middlertn!="暂无数据"&&r.push(parseFloat(t[l].middlertn)),t[l].longrtn!=null&&t[l].longrtn!="暂无数据"&&o.push(parseFloat(t[l].longrtn)),t[l].compositeScoreRankAvg!=null&&i.push(parseFloat(t[l].compositeScoreRankAvg)),t[l].weightedOrderBSRateAvg!=null&&h.push(parseFloat(t[l].weightedOrderBSRateAvg)),t[l].transBsRateAvg!=null&&a.push(parseFloat(t[l].transBsRateAvg)),t[l].sdRate!=null&&d.push(parseFloat(t[l].sdRate)),t[l].compositeScoreAvg!=null&&c.push(parseFloat(t[l].compositeScoreAvg));this.rankWeightMax=Math.max.apply(null,e),this.showCountMax=Math.max.apply(null,g),this.shortrtnMax=Math.max.apply(null,n),this.middlertnMax=Math.max.apply(null,r),this.longrtnMax=Math.max.apply(null,o),this.compositeScoreRankAvgMax=Math.max.apply(null,i),this.weightedOrderBSRateAvgMax=Math.max.apply(null,h),this.transBsRateAvgMax=Math.max.apply(null,a),this.sdRateMax=Math.max.apply(null,d),this.compositeScoreAvgMax=Math.max.apply(null,c),this.rankWeightMin=Math.min.apply(null,e),this.showCountMin=Math.min.apply(null,g),this.shortrtnMin=Math.min.apply(null,n),this.middlertnMin=Math.min.apply(null,r),this.longrtnMin=Math.min.apply(null,o),this.compositeScoreRankAvgMin=Math.min.apply(null,i),this.weightedOrderBSRateAvgMin=Math.min.apply(null,h),this.transBsRateAvgMin=Math.min.apply(null,a),this.sdRateMin=Math.min.apply(null,d),this.compositeScoreAvgMin=Math.min.apply(null,c)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple"},getNowDate(){var t=new Date,e=":",g=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),i=t.getMinutes(),h=t.getSeconds(),a=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];a[t.getDay()],n>=1&&n<=9&&(n="0"+n),r>=0&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o),i>=0&&i<=9&&(i="0"+i),h>=0&&h<=9&&(h="0"+h),this.updateTime=g+"-"+n+"-"+r+" "+o+e+i+e+h},setHighLimit(){this.showHighLimit=="计入"?(this.showHighLimit="不计入",this.getCScoreRank()):(this.showHighLimit="计入",this.getCScoreRank())},setShort(){this.showShort=="计入"?(this.showShort="不计入",this.getCScoreRank()):(this.showShort="计入",this.getCScoreRank())},getCScoreRank(){var t=null;this.showHighLimit=="不计入"?t="not-show":t="show";var e=null;this.showShort=="不计入"?e="not-show":e="show";var g=0;this.targetStkCode!=null&&typeof this.targetStkCode=="string"&&this.targetStkCode.length>0&&(g=this.targetStkCode),S({method:"post",url:"/getSingleCScoreRankGlobal",params:{high_limit_show:t,table_name:"mt_list",short_flag:e,sort_flag:"top",stk_code:g,page_name:"单个股票查询"}}).then(n=>{this.tableData=n.data,this.getNowDate(),this.getFieldMaxValue(n.data),this.currentStkCode=g}).catch(n=>{console.log(n),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},B={style:{width:"2000px"}},_={style:{display:"none"}};function L(t,e,g,n,r,o){const i=v("vxe-button"),h=v("vxe-input"),a=v("vxe-table-column"),d=v("vxe-table");return b(),k("div",B,[s(i,{onClick:e[0]||(e[0]=c=>o.getCScoreRank()),status:"primary",content:"更新",style:{width:"80px"}}),s(i,{onClick:e[1]||(e[1]=c=>o.setHighLimit()),status:"primary",content:"计入涨停",style:{left:"20px"}}),s(i,{onClick:e[2]||(e[2]=c=>o.setShort()),status:"primary",content:"计入看空",style:{left:"40px"}}),s(h,{modelValue:r.targetStkCode,"onUpdate:modelValue":e[3]||(e[3]=c=>r.targetStkCode=c),placeholder:"fCap数值",size:"medium",type:"string",style:{left:"70px"}},null,8,["modelValue"]),m("p",_,p(r.targetStkCode),1),m("p",null,"更新时间             "+p(r.updateTime),1),m("p",null,"是否计入涨停      "+p(r.showHighLimit),1),m("p",null,"是否计入看空      "+p(t.showShort),1),m("p",null,"当前查询股票      "+p(r.currentStkCode),1),s(d,{class:"mytable-style",border:"full",height:"1100",data:r.tableData,"cell-style":o.cellStyle,"row-class-name":o.rowClassName},{default:x(()=>[s(a,{type:"seq",width:"60",title:"序号"}),s(a,{field:"stkCode",sortable:"",title:"股票代码"}),s(a,{field:"stkName",sortable:"",title:"股票名称"}),s(a,{field:"sw3Code",sortable:"",title:"三级行业代码"}),s(a,{field:"sw3Name",sortable:"",title:"三级行业名称"}),s(a,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),s(a,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),s(a,{field:"compositeScoreAvg",sortable:"",title:"得分均值","sort-type":"number"}),s(a,{field:"compositeScoreRankAvg",sortable:"",title:"排名均值","sort-type":"number"}),s(a,{field:"weightedOrderBSRateAvg",sortable:"",title:"加权压托比","sort-type":"number"}),s(a,{field:"transBsRateAvg",sortable:"",title:"买卖比","sort-type":"number"}),s(a,{field:"showCount",sortable:"",title:"出现次数","sort-type":"number"}),s(a,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:o.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:o.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:o.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:o.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"product",sortable:"",title:"主要产品",width:"200"}),s(a,{field:"highLimitFlag",sortable:"",title:"当日涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const F=f(A,[["render",L]]),M=R(F);M.use(y);M.mount("#app");
