import{_ as R,a as M,r as c,c as p,b as d,d as B,t as S,w as f,o as g,e as m,V as b}from"./main-fe1c536f.js";function x(t){var a=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),o=parseFloat(a[3]||1),i=Math.floor(o*parseInt(a[0])+(1-o)*255),l=Math.floor(o*parseInt(a[1])+(1-o)*255),s=Math.floor(o*parseInt(a[2])+(1-o)*255);return"#"+("0"+i.toString(16)).slice(-2)+("0"+l.toString(16)).slice(-2)+("0"+s.toString(16)).slice(-2)}function h(t,a,o,i){let l=(o-a)/2;var s=255/l,e=0,r=0,n=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(e=255,r=255,n=255):(i=="asc"&&(t-a<l&&(e=s*(t-a),r=255),t-a>=l&&(r=255-(t-a-l)*s<0?0:255-(t-a-l)*s,e=255)),i=="desc"&&(t-a<l&&(r=s*(t-a),e=255),t-a>=l&&(e=255-(t-a-l)*s<0?0:255-(t-a-l)*s,r=255))),e=parseInt(e),r=parseInt(r),n=parseInt(n),x("rgb("+e+","+r+","+n+")")}const v={data(){return{timer:null,updateTime:null,orderBSRateMax:0,weightedOrderBSRateMax:0,transBsRateMax:0,orderBSRateM5Max:0,sdRateMax:0,orderBSRateMin:0,weightedOrderBSRateMin:0,transBsRateMin:0,orderBSRateM5Min:0,sdRateMin:0,tableData:[]}},mounted(){this.getSectorInfo(),this.timer=setInterval(this.getSectorInfo,6e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:a}){switch(a.field){case"orderBSRate":return{backgroundColor:h(t.orderBSRate,this.orderBSRateMin,this.orderBSRateMax,"asc"),color:"＃C0C0C0"};case"weightedOrderBSRate":return{backgroundColor:h(t.weightedOrderBSRate,this.weightedOrderBSRateMin,this.weightedOrderBSRateMax,"asc"),color:"＃C0C0C0"};case"transBsRate":return{backgroundColor:h(t.transBsRate,this.transBsRateMin,this.transBsRateMax,"asc"),color:"＃C0C0C0"};case"orderBSRateM5":return{backgroundColor:h(t.orderBSRateM5,this.orderBSRateM5Min,this.orderBSRateM5Max,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:h(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var a=[],o=[],i=[],l=[],s=[],e=0;e<t.length;e++)t[e].orderBSRate!=null&&a.push(parseFloat(t[e].orderBSRate)),t[e].weightedOrderBSRate!=null&&o.push(parseFloat(t[e].weightedOrderBSRate)),t[e].transBsRate!=null&&i.push(parseFloat(t[e].transBsRate)),t[e].orderBSRateM5!=null&&l.push(parseFloat(t[e].orderBSRateM5)),t[e].sdRate!=null&&s.push(parseFloat(t[e].sdRate));this.orderBSRateMax=Math.max.apply(null,a),this.weightedOrderBSRateMax=Math.max.apply(null,o),this.transBsRateMax=Math.max.apply(null,i),this.orderBSRateM5Max=Math.max.apply(null,l),this.sdRateMax=Math.max.apply(null,s),this.orderBSRateMin=Math.min.apply(null,a),this.weightedOrderBSRateMin=Math.min.apply(null,o),this.transBsRateMin=Math.min.apply(null,i),this.orderBSRateM5Min=Math.min.apply(null,l),this.sdRateMin=Math.min.apply(null,s)},getNowDate(){var t=new Date,a=":",o=t.getFullYear(),i=t.getMonth()+1,l=t.getDate(),s=t.getHours(),e=t.getMinutes(),r=t.getSeconds(),n=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];n[t.getDay()],i>=1&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),s>=0&&s<=9&&(s="0"+s),e>=0&&e<=9&&(e="0"+e),r>=0&&r<=9&&(r="0"+r),this.updateTime=o+"-"+i+"-"+l+" "+s+a+e+a+r},getSectorInfo(){M({method:"post",url:"/getSectorInfo",params:{sector_class:"sw2"}}).then(t=>{console.log(t.data),this.tableData=t.data,this.getNowDate(),this.getFieldMaxValue(t.data)}).catch(t=>{console.log(t),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},y={style:{width:"1500px"}};function C(t,a,o,i,l,s){const e=c("vxe-button"),r=c("vxe-table-column"),n=c("vxe-table");return g(),p("div",y,[d(e,{onClick:a[0]||(a[0]=_=>s.getSectorInfo()),status:"primary",content:"更新",style:{width:"80px"}}),B("p",null,"更新时间 "+S(l.updateTime),1),d(n,{border:"full",height:"1100","cell-style":s.cellStyle,data:l.tableData},{default:f(()=>[d(r,{type:"seq",width:"60",title:"序号"}),d(r,{field:"sw2Code",sortable:"",title:"行业代码"}),d(r,{field:"sw2Name",sortable:"",title:"行业名称"}),d(r,{field:"orderBSRate",sortable:"",title:"压托比","sort-type":"number"}),d(r,{field:"orderBSRateSource",sortable:"",title:"压托比正负来源"}),d(r,{field:"weightedOrderBSRate",sortable:"",title:"加权压托比","sort-type":"number"}),d(r,{field:"orderBSRateM5",sortable:"",title:"5分钟压托比","sort-type":"number"}),d(r,{field:"orderBSRateM5Source",sortable:"",title:"5分钟压托比正负来源"}),d(r,{field:"transBsRate",sortable:"",title:"买卖比","sort-type":"number"}),d(r,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:s.formatterNum,"sort-type":"number"},null,8,["formatter"])]),_:1},8,["cell-style","data"])])}const w=R(v,[["render",C]]),u=m(w);u.use(b);u.mount("#app");
