import{_ as f,a as g,r as M,c as R,b as i,d as b,t as S,w as x,o as B,e as C,V as y}from"./main-fe1c536f.js";function v(t){var r=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),n=parseFloat(r[3]||1),d=Math.floor(n*parseInt(r[0])+(1-n)*255),o=Math.floor(n*parseInt(r[1])+(1-n)*255),a=Math.floor(n*parseInt(r[2])+(1-n)*255);return"#"+("0"+d.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)}function u(t,r,n,d){let o=(n-r)/2;var a=255/o,s=0,e=0,h=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(s=255,e=255,h=255):(d=="asc"&&(t-r<o&&(s=a*(t-r),e=255),t-r>=o&&(e=255-(t-r-o)*a<0?0:255-(t-r-o)*a,s=255)),d=="desc"&&(t-r<o&&(e=a*(t-r),s=255),t-r>=o&&(s=255-(t-r-o)*a<0?0:255-(t-r-o)*a,e=255))),s=parseInt(s),e=parseInt(e),h=parseInt(h),v("rgb("+s+","+e+","+h+")")}const k={data(){return{timer:null,updateTime:null,rankWeightMax:0,orderBSRateMax:0,weightedOrderBSRateMax:0,transBsRateMax:0,compositeScoreMax:0,orderBSRateM5Max:0,sdRateMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,rankWeightMin:0,orderBSRateMin:0,weightedOrderBSRateMin:0,transBsRateMin:0,compositeScoreMin:0,orderBSRateM5Min:0,sdRateMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,tableData:[]}},mounted(){this.getPortfolioInfo(),this.timer=setInterval(this.getPortfolioInfo,2e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:r}){switch(r.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"orderBSRate":return{backgroundColor:u(t.orderBSRate,this.orderBSRateMin,this.orderBSRateMax,"asc"),color:"＃C0C0C0"};case"weightedOrderBSRate":return{backgroundColor:u(t.weightedOrderBSRate,this.weightedOrderBSRateMin,this.weightedOrderBSRateMax,"asc"),color:"＃C0C0C0"};case"transBsRate":return{backgroundColor:u(t.transBsRate,this.transBsRateMin,this.transBsRateMax,"asc"),color:"＃C0C0C0"};case"compositeScore":return{backgroundColor:u(t.compositeScore,this.compositeScoreMin,this.compositeScoreMax,"asc"),color:"＃C0C0C0"};case"orderBSRateM5":return{backgroundColor:u(t.orderBSRateM5,this.orderBSRateM5Min,this.orderBSRateM5Max,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:u(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var r=[],n=[],d=[],o=[],a=[],s=[],e=[],h=[],c=[],m=[],l=0;l<t.length;l++)t[l].rankWeight!=null&&r.push(parseFloat(t[l].rankWeight)),t[l].orderBSRate!=null&&n.push(parseFloat(t[l].orderBSRate)),t[l].weightedOrderBSRate!=null&&d.push(parseFloat(t[l].weightedOrderBSRate)),t[l].transBsRate!=null&&o.push(parseFloat(t[l].transBsRate)),t[l].compositeScore!=null&&a.push(parseFloat(t[l].compositeScore)),t[l].orderBSRateM5!=null&&s.push(parseFloat(t[l].orderBSRateM5)),t[l].sdRate!=null&&e.push(parseFloat(t[l].sdRate)),t[l].shortrtn!=null&&t[l].shortrtn!="暂无数据"&&h.push(parseFloat(t[l].shortrtn)),t[l].middlertn!=null&&t[l].middlertn!="暂无数据"&&c.push(parseFloat(t[l].middlertn)),t[l].longrtn!=null&&t[l].longrtn!="暂无数据"&&m.push(parseFloat(t[l].longrtn));this.rankWeightMax=Math.max.apply(null,r),this.orderBSRateMax=Math.max.apply(null,n),this.weightedOrderBSRateMax=Math.max.apply(null,d),this.transBsRateMax=Math.max.apply(null,o),this.compositeScoreMax=Math.max.apply(null,a),this.orderBSRateM5Max=Math.max.apply(null,s),this.sdRateMax=Math.max.apply(null,e),this.shortrtnMax=Math.max.apply(null,h),this.middlertnMax=Math.max.apply(null,c),this.longrtnMax=Math.max.apply(null,m),this.rankWeightMin=Math.min.apply(null,r),this.orderBSRateMin=Math.min.apply(null,n),this.weightedOrderBSRateMin=Math.min.apply(null,d),this.transBsRateMin=Math.min.apply(null,o),this.compositeScoreMin=Math.min.apply(null,a),this.orderBSRateM5Min=Math.min.apply(null,s),this.sdRateMin=Math.min.apply(null,e),this.shortrtnMin=Math.min.apply(null,h),this.middlertnMin=Math.min.apply(null,c),this.longrtnMin=Math.min.apply(null,m)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple";if(t.compositeScore>=2)return"row-red"},getNowDate(){var t=new Date,r=":",n=t.getFullYear(),d=t.getMonth()+1,o=t.getDate(),a=t.getHours(),s=t.getMinutes(),e=t.getSeconds(),h=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];h[t.getDay()],d>=1&&d<=9&&(d="0"+d),o>=0&&o<=9&&(o="0"+o),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),e>=0&&e<=9&&(e="0"+e),this.updateTime=n+"-"+d+"-"+o+" "+a+r+s+r+e},getPortfolioInfo(){g({method:"post",url:"/getSelectPortfolioInfo",params:{portfolio_percentage:"selected"}}).then(t=>{console.log(t.data),this.tableData=t.data,this.getNowDate(),this.getFieldMaxValue(t.data)}).catch(t=>{console.log(t),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},_={style:{width:"2000px"},id:"app_son_selected"};function w(t,r,n,d,o,a){const s=M("vxe-button"),e=M("vxe-table-column"),h=M("vxe-table");return B(),R("div",_,[i(s,{onClick:r[0]||(r[0]=c=>a.getPortfolioInfo()),status:"primary",content:"更新",style:{width:"80px"}}),b("p",null,"更新时间 "+S(o.updateTime),1),i(h,{class:"mytable-style",border:"full",height:"1100",data:o.tableData,"cell-style":a.cellStyle,"row-class-name":a.rowClassName},{default:x(()=>[i(e,{type:"seq",width:"60",title:"序号"}),i(e,{field:"stkCode",sortable:"",title:"股票代码"}),i(e,{field:"stkName",sortable:"",title:"股票名称"}),i(e,{field:"sw3Code",sortable:"",title:"三级行业代码"}),i(e,{field:"sw3Name",sortable:"",title:"三级行业名称"}),i(e,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),i(e,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),i(e,{field:"orderBSRate",sortable:"",title:"压托比","sort-type":"number"}),i(e,{field:"weightedOrderBSRate",sortable:"",title:"加权压托比","sort-type":"number"}),i(e,{field:"transBsRate",sortable:"",title:"买卖比","sort-type":"number"}),i(e,{field:"compositeScore",sortable:"",title:"综合得分","sort-type":"number"}),i(e,{field:"orderBSRateSource",sortable:"",title:"压托比正负来源"}),i(e,{field:"orderBSRateChangeRate",sortable:"",title:"压托比变化率",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"orderBSRateM5",sortable:"",title:"5分钟压托比","sort-type":"number"}),i(e,{field:"orderBSRateM5Source",sortable:"",title:"5分钟压托比正负来源"}),i(e,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"product",sortable:"",title:"主要产品",width:"200"}),i(e,{field:"highLimitFlag",sortable:"",title:"涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const N=f(k,[["render",w]]),p=C(N);p.use(y);p.mount("#app");
