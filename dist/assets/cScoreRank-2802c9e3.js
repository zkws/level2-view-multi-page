import{_ as f,a as b,r as m,c as C,b as s,d as g,t as d,w as M,o as w,e as v,V as k}from"./main-fe1c536f.js";function y(t){var e=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(e[3]||1),n=Math.floor(i*parseInt(e[0])+(1-i)*255),o=Math.floor(i*parseInt(e[1])+(1-i)*255),a=Math.floor(i*parseInt(e[2])+(1-i)*255);return"#"+("0"+n.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)}function u(t,e,i,n){let o=(i-e)/2;var a=255/o,r=0,l=0,h=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(r=255,l=255,h=255):(n=="asc"&&(t-e<o&&(r=a*(t-e),l=255),t-e>=o&&(l=255-(t-e-o)*a<0?0:255-(t-e-o)*a,r=255)),n=="desc"&&(t-e<o&&(l=a*(t-e),r=255),t-e>=o&&(r=255-(t-e-o)*a<0?0:255-(t-e-o)*a,l=255))),r=parseInt(r),l=parseInt(l),h=parseInt(h),y("rgb("+r+","+l+","+h+")")}const x={data(){return{timer:null,updateTime:null,showHighLimit:null,rankWeightMax:0,showCountMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,rankWeightMin:0,showCountMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,tableData:[]}},mounted(){this.showHighLimit="不计入",this.showShort="不计入",this.getCScoreRank(),this.timer=setInterval(this.getCScoreRank,6e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:e}){switch(e.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"showCount":return{backgroundColor:u(t.showCount,this.showCountMin,this.showCountMax,"asc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var e=[],i=[],n=[],o=[],a=[],r=0;r<t.length;r++)t[r].rankWeight!=null&&e.push(parseFloat(t[r].rankWeight)),t[r].showCount!=null&&i.push(parseFloat(t[r].showCount)),t[r].shortrtn!=null&&t[r].shortrtn!="暂无数据"&&n.push(parseFloat(t[r].shortrtn)),t[r].middlertn!=null&&t[r].middlertn!="暂无数据"&&o.push(parseFloat(t[r].middlertn)),t[r].longrtn!=null&&t[r].longrtn!="暂无数据"&&a.push(parseFloat(t[r].longrtn));this.rankWeightMax=Math.max.apply(null,e),this.showCountMax=Math.max.apply(null,i),this.shortrtnMax=Math.max.apply(null,n),this.middlertnMax=Math.max.apply(null,o),this.longrtnMax=Math.max.apply(null,a),this.rankWeightMin=Math.min.apply(null,e),this.showCountMin=Math.min.apply(null,i),this.shortrtnMin=Math.min.apply(null,n),this.middlertnMin=Math.min.apply(null,o),this.longrtnMin=Math.min.apply(null,a)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple"},getNowDate(){var t=new Date,e=":",i=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),a=t.getHours(),r=t.getMinutes(),l=t.getSeconds(),h=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];h[t.getDay()],n>=1&&n<=9&&(n="0"+n),o>=0&&o<=9&&(o="0"+o),a>=0&&a<=9&&(a="0"+a),r>=0&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),this.updateTime=i+"-"+n+"-"+o+" "+a+e+r+e+l},setHighLimit(){this.showHighLimit=="计入"?(this.showHighLimit="不计入",this.getCScoreRank()):(this.showHighLimit="计入",this.getCScoreRank())},setShort(){this.showShort=="计入"?(this.showShort="不计入",this.getCScoreRank()):(this.showShort="计入",this.getCScoreRank())},getCScoreRank(){var t=null;this.showHighLimit=="不计入"?t="not-show":t="show";var e=null;this.showShort=="不计入"?e="not-show":e="show",b({method:"post",url:"/getCScoreRank",params:{rank:t,table_name:"all",short_flag:e}}).then(i=>{this.tableData=i.data,this.getNowDate(),this.getFieldMaxValue(i.data)}).catch(i=>{console.log(i),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"?t:t+"%"}}},S={style:{width:"2000px"}};function _(t,e,i,n,o,a){const r=m("vxe-button"),l=m("vxe-table-column"),h=m("vxe-table");return w(),C("div",S,[s(r,{onClick:e[0]||(e[0]=c=>a.getCScoreRank()),status:"primary",content:"更新",style:{width:"80px"}}),s(r,{onClick:e[1]||(e[1]=c=>a.setHighLimit()),status:"primary",content:"计入涨停",style:{left:"20px"}}),s(r,{onClick:e[2]||(e[2]=c=>a.setShort()),status:"primary",content:"计入看空",style:{left:"40px"}}),g("p",null,"更新时间             "+d(o.updateTime),1),g("p",null,"是否计入涨停      "+d(o.showHighLimit),1),g("p",null,"是否计入看空      "+d(t.showShort),1),s(h,{class:"mytable-style",border:"full",height:"1100",data:o.tableData,"cell-style":a.cellStyle,"row-class-name":a.rowClassName},{default:M(()=>[s(l,{type:"seq",width:"60",title:"序号"}),s(l,{field:"stkCode",sortable:"",title:"股票代码"}),s(l,{field:"stkName",sortable:"",title:"股票名称"}),s(l,{field:"sw3Code",sortable:"",title:"三级行业代码"}),s(l,{field:"sw3Name",sortable:"",title:"三级行业名称"}),s(l,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),s(l,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),s(l,{field:"compositeScoreAvg",sortable:"",title:"得分均值","sort-type":"number"}),s(l,{field:"compositeScoreRankAvg",sortable:"",title:"排名均值","sort-type":"number"}),s(l,{field:"weightedOrderBSRateAvg",sortable:"",title:"加权压托比","sort-type":"number"}),s(l,{field:"transBsRateAvg",sortable:"",title:"买卖比","sort-type":"number"}),s(l,{field:"showCount",sortable:"",title:"出现次数","sort-type":"number"}),s(l,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(l,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(l,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(l,{field:"product",sortable:"",title:"主要产品",width:"200"}),s(l,{field:"highLimitFlag",sortable:"",title:"当日涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const L=f(x,[["render",_]]),p=v(L);p.use(k);p.mount("#app");
