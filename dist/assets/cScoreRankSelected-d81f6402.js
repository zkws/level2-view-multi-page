import{_ as f,a as C,r as m,c as b,b as i,d as p,t as v,w as x,o as R,e as S,V as k}from"./main-fe1c536f.js";function A(t){var r=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),n=parseFloat(r[3]||1),h=Math.floor(n*parseInt(r[0])+(1-n)*255),l=Math.floor(n*parseInt(r[1])+(1-n)*255),a=Math.floor(n*parseInt(r[2])+(1-n)*255);return"#"+("0"+h.toString(16)).slice(-2)+("0"+l.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)}function g(t,r,n,h){let l=(n-r)/2;var a=255/l,s=0,e=0,c=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(s=255,e=255,c=255):(h=="asc"&&(t-r<l&&(s=a*(t-r),e=255),t-r>=l&&(e=255-(t-r-l)*a<0?0:255-(t-r-l)*a,s=255)),h=="desc"&&(t-r<l&&(e=a*(t-r),s=255),t-r>=l&&(s=255-(t-r-l)*a<0?0:255-(t-r-l)*a,e=255))),s=parseInt(s),e=parseInt(e),c=parseInt(c),A("rgb("+s+","+e+","+c+")")}const y={data(){return{timer:null,updateTime:null,showHighLimit:null,rankWeightMax:0,showCountMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,compositeScoreRankAvgMax:0,weightedOrderBSRateAvgMax:0,transBsRateAvgMax:0,sdRateMax:0,compositeScoreAvgMax:0,rankWeightMin:0,showCountMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,compositeScoreRankAvgMin:0,weightedOrderBSRateAvgMin:0,transBsRateAvgMin:0,sdRateMin:0,compositeScoreAvgMin:0,tableData:[]}},mounted(){this.showHighLimit="不计入",this.getCScoreRank(),this.timer=setInterval(this.getCScoreRank,6e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:r}){switch(r.field){case"rankWeight":return{backgroundColor:g(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"showCount":return{backgroundColor:g(t.showCount,this.showCountMin,this.showCountMax,"asc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:g(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:g(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:g(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"};case"compositeScoreRankAvg":return{backgroundColor:g(t.compositeScoreRankAvg,this.compositeScoreRankAvgMin,this.compositeScoreRankAvgMax,"desc"),color:"＃C0C0C0"};case"weightedOrderBSRateAvg":return{backgroundColor:g(t.weightedOrderBSRateAvg,this.weightedOrderBSRateAvgMin,this.weightedOrderBSRateAvgMax,"asc"),color:"＃C0C0C0"};case"transBsRateAvg":return{backgroundColor:g(t.transBsRateAvg,this.transBsRateAvgMin,this.transBsRateAvgMax,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:g(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"compositeScoreAvg":return{backgroundColor:g(t.compositeScoreAvg,this.compositeScoreAvgMin,this.compositeScoreAvgMax,"asc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var r=[],n=[],h=[],l=[],a=[],s=[],e=[],c=[],u=[],d=[],o=0;o<t.length;o++)t[o].rankWeight!=null&&r.push(parseFloat(t[o].rankWeight)),t[o].showCount!=null&&n.push(parseFloat(t[o].showCount)),t[o].shortrtn!=null&&t[o].shortrtn!="暂无数据"&&h.push(parseFloat(t[o].shortrtn)),t[o].middlertn!=null&&t[o].middlertn!="暂无数据"&&l.push(parseFloat(t[o].middlertn)),t[o].longrtn!=null&&t[o].longrtn!="暂无数据"&&a.push(parseFloat(t[o].longrtn)),t[o].compositeScoreRankAvg!=null&&s.push(parseFloat(t[o].compositeScoreRankAvg)),t[o].weightedOrderBSRateAvg!=null&&e.push(parseFloat(t[o].weightedOrderBSRateAvg)),t[o].transBsRateAvg!=null&&c.push(parseFloat(t[o].transBsRateAvg)),t[o].sdRate!=null&&u.push(parseFloat(t[o].sdRate)),t[o].compositeScoreAvg!=null&&d.push(parseFloat(t[o].compositeScoreAvg));this.rankWeightMax=Math.max.apply(null,r),this.showCountMax=Math.max.apply(null,n),this.shortrtnMax=Math.max.apply(null,h),this.middlertnMax=Math.max.apply(null,l),this.longrtnMax=Math.max.apply(null,a),this.compositeScoreRankAvgMax=Math.max.apply(null,s),this.weightedOrderBSRateAvgMax=Math.max.apply(null,e),this.transBsRateAvgMax=Math.max.apply(null,c),this.sdRateMax=Math.max.apply(null,u),this.compositeScoreAvgMax=Math.max.apply(null,d),this.rankWeightMin=Math.min.apply(null,r),this.showCountMin=Math.min.apply(null,n),this.shortrtnMin=Math.min.apply(null,h),this.middlertnMin=Math.min.apply(null,l),this.longrtnMin=Math.min.apply(null,a),this.compositeScoreRankAvgMin=Math.min.apply(null,s),this.weightedOrderBSRateAvgMin=Math.min.apply(null,e),this.transBsRateAvgMin=Math.min.apply(null,c),this.sdRateMin=Math.min.apply(null,u),this.compositeScoreAvgMin=Math.min.apply(null,d)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple"},getNowDate(){var t=new Date,r=":",n=t.getFullYear(),h=t.getMonth()+1,l=t.getDate(),a=t.getHours(),s=t.getMinutes(),e=t.getSeconds(),c=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];c[t.getDay()],h>=1&&h<=9&&(h="0"+h),l>=0&&l<=9&&(l="0"+l),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),e>=0&&e<=9&&(e="0"+e),this.updateTime=n+"-"+h+"-"+l+" "+a+r+s+r+e},setHighLimit(){this.showHighLimit=="计入"?(this.showHighLimit="不计入",this.getCScoreRank()):(this.showHighLimit="计入",this.getCScoreRank())},getCScoreRank(){var t=null;this.showHighLimit=="不计入"?t="not-show":t="show",C({method:"post",url:"/getCScoreRankInScope",params:{rank:t,table_name:"selected",short_flag:"show"}}).then(r=>{console.log(r.data),this.tableData=r.data,this.getNowDate(),this.getFieldMaxValue(r.data)}).catch(r=>{console.log(r),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},w={style:{width:"2000px"}};function B(t,r,n,h,l,a){const s=m("vxe-button"),e=m("vxe-table-column"),c=m("vxe-table");return R(),b("div",w,[i(s,{onClick:r[0]||(r[0]=u=>a.getCScoreRank()),status:"primary",content:"更新",style:{width:"80px"}}),i(s,{onClick:r[1]||(r[1]=u=>a.setHighLimit()),status:"primary",content:"计入涨停",style:{left:"20px"}}),p("p",null,"更新时间             "+v(l.updateTime),1),p("p",null,"是否计入涨停      "+v(l.showHighLimit),1),i(c,{class:"mytable-style",border:"full",height:"1100",data:l.tableData,"cell-style":a.cellStyle,"row-class-name":a.rowClassName},{default:x(()=>[i(e,{type:"seq",width:"60",title:"序号"}),i(e,{field:"stkCode",sortable:"",title:"股票代码"}),i(e,{field:"stkName",sortable:"",title:"股票名称"}),i(e,{field:"sw3Code",sortable:"",title:"三级行业代码"}),i(e,{field:"sw3Name",sortable:"",title:"三级行业名称"}),i(e,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),i(e,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),i(e,{field:"compositeScoreAvg",sortable:"",title:"得分均值","sort-type":"number"}),i(e,{field:"compositeScoreRankAvg",sortable:"",title:"排名均值","sort-type":"number"}),i(e,{field:"weightedOrderBSRateAvg",sortable:"",title:"加权压托比","sort-type":"number"}),i(e,{field:"transBsRateAvg",sortable:"",title:"买卖比","sort-type":"number"}),i(e,{field:"showCount",sortable:"",title:"出现次数","sort-type":"number"}),i(e,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"product",sortable:"",title:"主要产品",width:"200"}),i(e,{field:"highLimitFlag",sortable:"",title:"当日涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const L=f(y,[["render",B]]),M=S(L);M.use(k);M.mount("#app");
