import{_ as R,a as S,r as p,c as b,b as s,d as M,t as g,w as x,o as B,e as C,V as y}from"./main-fe1c536f.js";function v(t){var r=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),n=parseFloat(r[3]||1),d=Math.floor(n*parseInt(r[0])+(1-n)*255),l=Math.floor(n*parseInt(r[1])+(1-n)*255),a=Math.floor(n*parseInt(r[2])+(1-n)*255);return"#"+("0"+d.toString(16)).slice(-2)+("0"+l.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)}function u(t,r,n,d){let l=(n-r)/2;var a=255/l,i=0,e=0,h=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(i=255,e=255,h=255):(d=="asc"&&(t-r<l&&(i=a*(t-r),e=255),t-r>=l&&(e=255-(t-r-l)*a<0?0:255-(t-r-l)*a,i=255)),d=="desc"&&(t-r<l&&(e=a*(t-r),i=255),t-r>=l&&(i=255-(t-r-l)*a<0?0:255-(t-r-l)*a,e=255))),i=parseInt(i),e=parseInt(e),h=parseInt(h),v("rgb("+i+","+e+","+h+")")}const k={data(){return{timer:null,updateTime:null,sectorLong:null,rankWeightMax:0,orderBSRateMax:0,weightedOrderBSRateMax:0,transBsRateMax:0,compositeScoreMax:0,orderBSRateM5Max:0,sdRateMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,rankWeightMin:0,orderBSRateMin:0,weightedOrderBSRateMin:0,transBsRateMin:0,compositeScoreMin:0,orderBSRateM5Min:0,sdRateMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,tableData:[]}},mounted(){this.sectorLong="Long",this.getPortfolioInfo(),this.timer=setInterval(this.getPortfolioInfo,2e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:r}){switch(r.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"orderBSRate":return{backgroundColor:u(t.orderBSRate,this.orderBSRateMin,this.orderBSRateMax,"asc"),color:"＃C0C0C0"};case"weightedOrderBSRate":return{backgroundColor:u(t.weightedOrderBSRate,this.weightedOrderBSRateMin,this.weightedOrderBSRateMax,"asc"),color:"＃C0C0C0"};case"transBsRate":return{backgroundColor:u(t.transBsRate,this.transBsRateMin,this.transBsRateMax,"asc"),color:"＃C0C0C0"};case"compositeScore":return{backgroundColor:u(t.compositeScore,this.compositeScoreMin,this.compositeScoreMax,"asc"),color:"＃C0C0C0"};case"orderBSRateM5":return{backgroundColor:u(t.orderBSRateM5,this.orderBSRateM5Min,this.orderBSRateM5Max,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:u(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var r=[],n=[],d=[],l=[],a=[],i=[],e=[],h=[],c=[],m=[],o=0;o<t.length;o++)t[o].rankWeight!=null&&r.push(parseFloat(t[o].rankWeight)),t[o].orderBSRate!=null&&n.push(parseFloat(t[o].orderBSRate)),t[o].weightedOrderBSRate!=null&&d.push(parseFloat(t[o].weightedOrderBSRate)),t[o].transBsRate!=null&&l.push(parseFloat(t[o].transBsRate)),t[o].compositeScore!=null&&a.push(parseFloat(t[o].compositeScore)),t[o].orderBSRateM5!=null&&i.push(parseFloat(t[o].orderBSRateM5)),t[o].sdRate!=null&&e.push(parseFloat(t[o].sdRate)),t[o].shortrtn!=null&&t[o].shortrtn!="暂无数据"&&h.push(parseFloat(t[o].shortrtn)),t[o].middlertn!=null&&t[o].middlertn!="暂无数据"&&c.push(parseFloat(t[o].middlertn)),t[o].longrtn!=null&&t[o].longrtn!="暂无数据"&&m.push(parseFloat(t[o].longrtn));this.rankWeightMax=Math.max.apply(null,r),this.orderBSRateMax=Math.max.apply(null,n),this.weightedOrderBSRateMax=Math.max.apply(null,d),this.transBsRateMax=Math.max.apply(null,l),this.compositeScoreMax=Math.max.apply(null,a),this.orderBSRateM5Max=Math.max.apply(null,i),this.sdRateMax=Math.max.apply(null,e),this.shortrtnMax=Math.max.apply(null,h),this.middlertnMax=Math.max.apply(null,c),this.longrtnMax=Math.max.apply(null,m),this.rankWeightMin=Math.min.apply(null,r),this.orderBSRateMin=Math.min.apply(null,n),this.weightedOrderBSRateMin=Math.min.apply(null,d),this.transBsRateMin=Math.min.apply(null,l),this.compositeScoreMin=Math.min.apply(null,a),this.orderBSRateM5Min=Math.min.apply(null,i),this.sdRateMin=Math.min.apply(null,e),this.shortrtnMin=Math.min.apply(null,h),this.middlertnMin=Math.min.apply(null,c),this.longrtnMin=Math.min.apply(null,m)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple";if(t.compositeScore>=2)return"row-red"},getNowDate(){var t=new Date,r=":",n=t.getFullYear(),d=t.getMonth()+1,l=t.getDate(),a=t.getHours(),i=t.getMinutes(),e=t.getSeconds(),h=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];h[t.getDay()],d>=1&&d<=9&&(d="0"+d),l>=0&&l<=9&&(l="0"+l),a>=0&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i),e>=0&&e<=9&&(e="0"+e),this.updateTime=n+"-"+d+"-"+l+" "+a+r+i+r+e},setSectorLong(){this.sectorLong=="Long"?(this.sectorLong="ALL",this.getPortfolioInfo()):(this.sectorLong="Long",this.getPortfolioInfo())},getPortfolioInfo(){S({method:"post",url:"/getPortfolioInfo",params:{portfolio_percentage:"20% of",sector_long:this.sectorLong}}).then(t=>{this.tableData=t.data,this.getNowDate(),this.getFieldMaxValue(t.data)}).catch(t=>{console.log(t),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},L={style:{width:"2000px"},id:"app_son"};function w(t,r,n,d,l,a){const i=p("vxe-button"),e=p("vxe-table-column"),h=p("vxe-table");return B(),b("div",L,[s(i,{onClick:r[0]||(r[0]=c=>a.getPortfolioInfo()),status:"primary",content:"更新",style:{width:"80px"}}),s(i,{onClick:r[1]||(r[1]=c=>a.setSectorLong()),status:"primary",content:"切换行业",style:{left:"20px"}}),M("p",null,"更新时间             "+g(l.updateTime),1),M("p",null,"当前显示             "+g(l.sectorLong),1),s(h,{class:"mytable-style",border:"full",height:"1100",data:l.tableData,"cell-style":a.cellStyle,"row-class-name":a.rowClassName},{default:x(()=>[s(e,{type:"seq",width:"60",title:"序号"}),s(e,{field:"stkCode",sortable:"",title:"股票代码"}),s(e,{field:"stkName",sortable:"",title:"股票名称"}),s(e,{field:"sw3Code",sortable:"",title:"三级行业代码"}),s(e,{field:"sw3Name",sortable:"",title:"三级行业名称"}),s(e,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),s(e,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),s(e,{field:"orderBSRate",sortable:"",title:"压托比","sort-type":"number"}),s(e,{field:"weightedOrderBSRate",sortable:"",title:"加权压托比","sort-type":"number"}),s(e,{field:"transBsRate",sortable:"",title:"买卖比","sort-type":"number"}),s(e,{field:"compositeScore",sortable:"",title:"综合得分","sort-type":"number"}),s(e,{field:"orderBSRateSource",sortable:"",title:"压托比正负来源"}),s(e,{field:"orderBSRateChangeRate",sortable:"",title:"压托比变化率",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(e,{field:"orderBSRateM5",sortable:"",title:"5分钟压托比","sort-type":"number"}),s(e,{field:"orderBSRateM5Source",sortable:"",title:"5分钟压托比正负来源"}),s(e,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(e,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(e,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(e,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:a.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(e,{field:"product",sortable:"",title:"主要产品",width:"200"}),s(e,{field:"highLimitFlag",sortable:"",title:"涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const _=R(k,[["render",w]]),f=C(_);f.use(y);f.mount("#app");
