import{f as C,_ as f,a as S,r as v,c as x,b as s,d,t as m,w as b,o as R,e as y,V as k}from"./main-4db38276.js";C("");function w(t){var e=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),g=parseFloat(e[3]||1),n=Math.floor(g*parseInt(e[0])+(1-g)*255),r=Math.floor(g*parseInt(e[1])+(1-g)*255),l=Math.floor(g*parseInt(e[2])+(1-g)*255);return"#"+("0"+n.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)+("0"+l.toString(16)).slice(-2)}function u(t,e,g,n){let r=(g-e)/2;var l=255/r,i=0,h=0,a=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(i=255,h=255,a=255):(n=="asc"&&(t-e<r&&(i=l*(t-e),h=255),t-e>=r&&(h=255-(t-e-r)*l<0?0:255-(t-e-r)*l,i=255)),n=="desc"&&(t-e<r&&(h=l*(t-e),i=255),t-e>=r&&(i=255-(t-e-r)*l<0?0:255-(t-e-r)*l,h=255))),i=parseInt(i),h=parseInt(h),a=parseInt(a),w("rgb("+i+","+h+","+a+")")}const A={data(){return{timer:null,currentFCap:0,targetFCap:0,updateTime:null,showHighLimit:null,rankWeightMax:0,showCountMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,compositeScoreRankAvgMax:0,weightedOrderBSRateAvgMax:0,transBsRateAvgMax:0,sdRateMax:0,compositeScoreAvgMax:0,rankWeightMin:0,showCountMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,compositeScoreRankAvgMin:0,weightedOrderBSRateAvgMin:0,transBsRateAvgMin:0,sdRateMin:0,compositeScoreAvgMin:0,tableData:[]}},mounted(){this.showHighLimit="不计入",this.currentFCap=0,this.targetFCap=0,this.showShort="不计入",this.getCScoreRank(),this.timer=setInterval(this.getCScoreRank,6e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:e}){switch(e.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"showCount":return{backgroundColor:u(t.showCount,this.showCountMin,this.showCountMax,"asc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"};case"compositeScoreRankAvg":return{backgroundColor:u(t.compositeScoreRankAvg,this.compositeScoreRankAvgMin,this.compositeScoreRankAvgMax,"desc"),color:"＃C0C0C0"};case"weightedOrderBSRateAvg":return{backgroundColor:u(t.weightedOrderBSRateAvg,this.weightedOrderBSRateAvgMin,this.weightedOrderBSRateAvgMax,"asc"),color:"＃C0C0C0"};case"transBsRateAvg":return{backgroundColor:u(t.transBsRateAvg,this.transBsRateAvgMin,this.transBsRateAvgMax,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:u(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"compositeScoreAvg":return{backgroundColor:u(t.compositeScoreAvg,this.compositeScoreAvgMin,this.compositeScoreAvgMax,"asc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var e=[],g=[],n=[],r=[],l=[],i=[],h=[],a=[],p=[],c=[],o=0;o<t.length;o++)t[o].rankWeight!=null&&e.push(parseFloat(t[o].rankWeight)),t[o].showCount!=null&&g.push(parseFloat(t[o].showCount)),t[o].shortrtn!=null&&t[o].shortrtn!="暂无数据"&&n.push(parseFloat(t[o].shortrtn)),t[o].middlertn!=null&&t[o].middlertn!="暂无数据"&&r.push(parseFloat(t[o].middlertn)),t[o].longrtn!=null&&t[o].longrtn!="暂无数据"&&l.push(parseFloat(t[o].longrtn)),t[o].compositeScoreRankAvg!=null&&i.push(parseFloat(t[o].compositeScoreRankAvg)),t[o].weightedOrderBSRateAvg!=null&&h.push(parseFloat(t[o].weightedOrderBSRateAvg)),t[o].transBsRateAvg!=null&&a.push(parseFloat(t[o].transBsRateAvg)),t[o].sdRate!=null&&p.push(parseFloat(t[o].sdRate)),t[o].compositeScoreAvg!=null&&c.push(parseFloat(t[o].compositeScoreAvg));this.rankWeightMax=Math.max.apply(null,e),this.showCountMax=Math.max.apply(null,g),this.shortrtnMax=Math.max.apply(null,n),this.middlertnMax=Math.max.apply(null,r),this.longrtnMax=Math.max.apply(null,l),this.compositeScoreRankAvgMax=Math.max.apply(null,i),this.weightedOrderBSRateAvgMax=Math.max.apply(null,h),this.transBsRateAvgMax=Math.max.apply(null,a),this.sdRateMax=Math.max.apply(null,p),this.compositeScoreAvgMax=Math.max.apply(null,c),this.rankWeightMin=Math.min.apply(null,e),this.showCountMin=Math.min.apply(null,g),this.shortrtnMin=Math.min.apply(null,n),this.middlertnMin=Math.min.apply(null,r),this.longrtnMin=Math.min.apply(null,l),this.compositeScoreRankAvgMin=Math.min.apply(null,i),this.weightedOrderBSRateAvgMin=Math.min.apply(null,h),this.transBsRateAvgMin=Math.min.apply(null,a),this.sdRateMin=Math.min.apply(null,p),this.compositeScoreAvgMin=Math.min.apply(null,c)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple"},getNowDate(){var t=new Date,e=":",g=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),l=t.getHours(),i=t.getMinutes(),h=t.getSeconds(),a=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];a[t.getDay()],n>=1&&n<=9&&(n="0"+n),r>=0&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),i>=0&&i<=9&&(i="0"+i),h>=0&&h<=9&&(h="0"+h),this.updateTime=g+"-"+n+"-"+r+" "+l+e+i+e+h},setHighLimit(){this.showHighLimit=="计入"?(this.showHighLimit="不计入",this.getCScoreRank()):(this.showHighLimit="计入",this.getCScoreRank())},setShort(){this.showShort=="计入"?(this.showShort="不计入",this.getCScoreRank()):(this.showShort="计入",this.getCScoreRank())},getCScoreRank(){var t=null;this.showHighLimit=="不计入"?t="not-show":t="show";var e=null;this.showShort=="不计入"?e="not-show":e="show";var g=0;this.targetFCap!=null&&typeof this.targetFCap=="string"&&this.targetFCap.length>0&&(g=this.targetFCap),S({method:"post",url:"/getCScoreRankByOverallRatingThreshold",params:{high_limit_show:t,table_name:"mt_list",short_flag:e,sort_flag:"top",threshold:g}}).then(n=>{this.tableData=n.data,this.getNowDate(),this.getFieldMaxValue(n.data),this.currentFCap=g}).catch(n=>{console.log(n),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},F={style:{width:"2000px"}},B={style:{display:"none"}};function _(t,e,g,n,r,l){const i=v("vxe-button"),h=v("vxe-input"),a=v("vxe-table-column"),p=v("vxe-table");return R(),x("div",F,[s(i,{onClick:e[0]||(e[0]=c=>l.getCScoreRank()),status:"primary",content:"更新",style:{width:"80px"}}),s(i,{onClick:e[1]||(e[1]=c=>l.setHighLimit()),status:"primary",content:"计入涨停",style:{left:"20px"}}),s(i,{onClick:e[2]||(e[2]=c=>l.setShort()),status:"primary",content:"计入看空",style:{left:"40px"}}),s(h,{modelValue:r.targetFCap,"onUpdate:modelValue":e[3]||(e[3]=c=>r.targetFCap=c),placeholder:"fCap数值",size:"medium",type:"number",style:{left:"70px"}},null,8,["modelValue"]),d("p",B,m(r.targetFCap),1),d("p",null,"更新时间             "+m(r.updateTime),1),d("p",null,"是否计入涨停      "+m(r.showHighLimit),1),d("p",null,"是否计入看空      "+m(t.showShort),1),d("p",null,"当前fCap数值      "+m(r.currentFCap),1),s(p,{class:"mytable-style",border:"full",height:"1100",data:r.tableData,"cell-style":l.cellStyle,"row-class-name":l.rowClassName},{default:b(()=>[s(a,{type:"seq",width:"60",title:"序号"}),s(a,{field:"stkCode",sortable:"",title:"股票代码"}),s(a,{field:"stkName",sortable:"",title:"股票名称"}),s(a,{field:"sw3Code",sortable:"",title:"三级行业代码"}),s(a,{field:"sw3Name",sortable:"",title:"三级行业名称"}),s(a,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),s(a,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),s(a,{field:"compositeScoreAvg",sortable:"",title:"得分均值","sort-type":"number"}),s(a,{field:"compositeScoreRankAvg",sortable:"",title:"排名均值","sort-type":"number"}),s(a,{field:"weightedOrderBSRateAvg",sortable:"",title:"加权压托比","sort-type":"number"}),s(a,{field:"transBsRateAvg",sortable:"",title:"买卖比","sort-type":"number"}),s(a,{field:"showCount",sortable:"",title:"出现次数","sort-type":"number"}),s(a,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),s(a,{field:"product",sortable:"",title:"主要产品",width:"200"}),s(a,{field:"highLimitFlag",sortable:"",title:"当日涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const L=f(A,[["render",_]]),M=y(L);M.use(k);M.mount("#app");
