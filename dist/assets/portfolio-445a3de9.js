import{_ as R,a as S,r as g,c as b,b as i,d as M,t as p,w as B,o as x,e as C,V as y}from"./main-fe1c536f.js";function v(t){var a=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),n=parseFloat(a[3]||1),d=Math.floor(n*parseInt(a[0])+(1-n)*255),o=Math.floor(n*parseInt(a[1])+(1-n)*255),l=Math.floor(n*parseInt(a[2])+(1-n)*255);return"#"+("0"+d.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)+("0"+l.toString(16)).slice(-2)}function u(t,a,n,d){let o=(n-a)/2;var l=255/o,s=0,e=0,h=0;return t=="暂无数据"||t==null||t===""||t.match(/^\s*$/)?(s=255,e=255,h=255):(d=="asc"&&(t-a<o&&(s=l*(t-a),e=255),t-a>=o&&(e=255-(t-a-o)*l<0?0:255-(t-a-o)*l,s=255)),d=="desc"&&(t-a<o&&(e=l*(t-a),s=255),t-a>=o&&(s=255-(t-a-o)*l<0?0:255-(t-a-o)*l,e=255))),s=parseInt(s),e=parseInt(e),h=parseInt(h),v("rgb("+s+","+e+","+h+")")}const k={data(){return{timer:null,updateTime:null,sectorLong:null,rankWeightMax:0,orderBSRateMax:0,weightedOrderBSRateMax:0,transBsRateMax:0,compositeScoreMax:0,orderBSRateM5Max:0,sdRateMax:0,shortrtnMax:0,middlertnMax:0,longrtnMax:0,rankWeightMin:0,orderBSRateMin:0,weightedOrderBSRateMin:0,transBsRateMin:0,compositeScoreMin:0,orderBSRateM5Min:0,sdRateMin:0,shortrtnMin:0,middlertnMin:0,longrtnMin:0,tableData:[]}},mounted(){this.sectorLong="Long",this.getPortfolioInfo(),this.timer=setInterval(this.getPortfolioInfo,2e4),this.getNowDate()},beforeDestroy(){clearInterval(this.timer)},methods:{cellStyle({row:t,column:a}){switch(a.field){case"rankWeight":return{backgroundColor:u(t.rankWeight,this.rankWeightMin,this.rankWeightMax,"asc"),color:"＃C0C0C0"};case"orderBSRate":return{backgroundColor:u(t.orderBSRate,this.orderBSRateMin,this.orderBSRateMax,"asc"),color:"＃C0C0C0"};case"weightedOrderBSRate":return{backgroundColor:u(t.weightedOrderBSRate,this.weightedOrderBSRateMin,this.weightedOrderBSRateMax,"asc"),color:"＃C0C0C0"};case"transBsRate":return{backgroundColor:u(t.transBsRate,this.transBsRateMin,this.transBsRateMax,"asc"),color:"＃C0C0C0"};case"compositeScore":return{backgroundColor:u(t.compositeScore,this.compositeScoreMin,this.compositeScoreMax,"asc"),color:"＃C0C0C0"};case"orderBSRateM5":return{backgroundColor:u(t.orderBSRateM5,this.orderBSRateM5Min,this.orderBSRateM5Max,"asc"),color:"＃C0C0C0"};case"sdRate":return{backgroundColor:u(t.sdRate,this.sdRateMin,this.sdRateMax,"desc"),color:"＃C0C0C0"};case"shortrtn":return{backgroundColor:u(t.shortrtn,this.shortrtnMin,this.shortrtnMax,"desc"),color:"＃C0C0C0"};case"middlertn":return{backgroundColor:u(t.middlertn,this.middlertnMin,this.middlertnMax,"desc"),color:"＃C0C0C0"};case"longrtn":return{backgroundColor:u(t.longrtn,this.longrtnMin,this.longrtnMax,"desc"),color:"＃C0C0C0"}}},getFieldMaxValue(t){for(var a=[],n=[],d=[],o=[],l=[],s=[],e=[],h=[],c=[],m=[],r=0;r<t.length;r++)t[r].rankWeight!=null&&a.push(parseFloat(t[r].rankWeight)),t[r].orderBSRate!=null&&t[r].orderBSRate.trim().length>0&&n.push(parseFloat(t[r].orderBSRate)),t[r].weightedOrderBSRate!=null&&t[r].weightedOrderBSRate.trim().length>0&&d.push(parseFloat(t[r].weightedOrderBSRate)),t[r].transBsRate!=null&&t[r].transBsRate.trim().length>0&&o.push(parseFloat(t[r].transBsRate)),t[r].compositeScore!=null&&t[r].compositeScore.trim().length>0&&l.push(parseFloat(t[r].compositeScore)),t[r].orderBSRateM5!=null&&t[r].orderBSRateM5.trim().length>0&&s.push(parseFloat(t[r].orderBSRateM5)),t[r].sdRate!=null&&t[r].sdRate.trim().length>0&&t[r].sdRate!="暂无数据"&&e.push(parseFloat(t[r].sdRate)),t[r].shortrtn!=null&&t[r].shortrtn!="暂无数据"&&h.push(parseFloat(t[r].shortrtn)),t[r].middlertn!=null&&t[r].middlertn!="暂无数据"&&c.push(parseFloat(t[r].middlertn)),t[r].longrtn!=null&&t[r].longrtn!="暂无数据"&&m.push(parseFloat(t[r].longrtn));this.rankWeightMax=Math.max.apply(null,a),this.orderBSRateMax=Math.max.apply(null,n),this.weightedOrderBSRateMax=Math.max.apply(null,d),this.transBsRateMax=Math.max.apply(null,o),this.compositeScoreMax=Math.max.apply(null,l),this.orderBSRateM5Max=Math.max.apply(null,s),this.sdRateMax=Math.max.apply(null,e),this.shortrtnMax=Math.max.apply(null,h),this.middlertnMax=Math.max.apply(null,c),this.longrtnMax=Math.max.apply(null,m),this.rankWeightMin=Math.min.apply(null,a),this.orderBSRateMin=Math.min.apply(null,n),this.weightedOrderBSRateMin=Math.min.apply(null,d),this.transBsRateMin=Math.min.apply(null,o),this.compositeScoreMin=Math.min.apply(null,l),this.orderBSRateM5Min=Math.min.apply(null,s),this.sdRateMin=Math.min.apply(null,e),this.shortrtnMin=Math.min.apply(null,h),this.middlertnMin=Math.min.apply(null,c),this.longrtnMin=Math.min.apply(null,m)},rowClassName({row:t}){if(t.highLimitFlag>0)return"row-purple";if(t.compositeScore>=2)return"row-red"},getNowDate(){var t=new Date,a=":",n=t.getFullYear(),d=t.getMonth()+1,o=t.getDate(),l=t.getHours(),s=t.getMinutes(),e=t.getSeconds(),h=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];h[t.getDay()],d>=1&&d<=9&&(d="0"+d),o>=0&&o<=9&&(o="0"+o),l>=0&&l<=9&&(l="0"+l),s>=0&&s<=9&&(s="0"+s),e>=0&&e<=9&&(e="0"+e),this.updateTime=n+"-"+d+"-"+o+" "+l+a+s+a+e},setSectorLong(){this.sectorLong=="Long"?(this.sectorLong="ALL",this.getPortfolioInfo()):(this.sectorLong="Long",this.getPortfolioInfo())},getPortfolioInfo(){S({method:"post",url:"/getPortfolioInfo",params:{portfolio_percentage:"20% of",sector_long:this.sectorLong}}).then(t=>{this.tableData=t.data,this.getNowDate(),this.getFieldMaxValue(t.data)}).catch(t=>{console.log(t),this.updateTime="请求失败"})},formatterNum({cellValue:t}){return t=="暂无数据"||t==null?"暂无数据":t+"%"}}},L={style:{width:"2000px"},id:"app_son"};function w(t,a,n,d,o,l){const s=g("vxe-button"),e=g("vxe-table-column"),h=g("vxe-table");return x(),b("div",L,[i(s,{onClick:a[0]||(a[0]=c=>l.getPortfolioInfo()),status:"primary",content:"更新",style:{width:"80px"}}),i(s,{onClick:a[1]||(a[1]=c=>l.setSectorLong()),status:"primary",content:"切换行业",style:{left:"20px"}}),M("p",null,"更新时间             "+p(o.updateTime),1),M("p",null,"当前显示             "+p(o.sectorLong),1),i(h,{class:"mytable-style",border:"full",height:"1100",data:o.tableData,"cell-style":l.cellStyle,"row-class-name":l.rowClassName},{default:B(()=>[i(e,{type:"seq",width:"60",title:"序号"}),i(e,{field:"stkCode",sortable:"",title:"股票代码"}),i(e,{field:"stkName",sortable:"",title:"股票名称"}),i(e,{field:"sw3Code",sortable:"",title:"三级行业代码"}),i(e,{field:"sw3Name",sortable:"",title:"三级行业名称"}),i(e,{field:"rankNum",sortable:"",title:"行业内相对排名","sort-type":"number"}),i(e,{field:"rankWeight",sortable:"",title:"行业内权重","sort-type":"number"}),i(e,{field:"orderBSRate",sortable:"",title:"压托比","sort-type":"number"}),i(e,{field:"weightedOrderBSRate",sortable:"",title:"加权压托比","sort-type":"number"}),i(e,{field:"transBsRate",sortable:"",title:"买卖比","sort-type":"number"}),i(e,{field:"compositeScore",sortable:"",title:"综合得分","sort-type":"number"}),i(e,{field:"orderBSRateSource",sortable:"",title:"压托比正负来源"}),i(e,{field:"orderBSRateChangeRate",sortable:"",title:"压托比变化率",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"orderBSRateM5",sortable:"",title:"5分钟压托比","sort-type":"number"}),i(e,{field:"orderBSRateM5Source",sortable:"",title:"5分钟压托比正负来源"}),i(e,{field:"sdRate",sortable:"",title:"当日涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"shortrtn",sortable:"",title:"短期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"middlertn",sortable:"",title:"中期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"longrtn",sortable:"",title:"长期涨跌幅",formatter:l.formatterNum,"sort-type":"number"},null,8,["formatter"]),i(e,{field:"product",sortable:"",title:"主要产品",width:"200"}),i(e,{field:"highLimitFlag",sortable:"",title:"涨停标志"})]),_:1},8,["data","cell-style","row-class-name"])])}const _=R(k,[["render",w]]),f=C(_);f.use(y);f.mount("#app");
