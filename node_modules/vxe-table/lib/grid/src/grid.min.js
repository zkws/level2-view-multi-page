"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_utils=require("../../tools/utils"),_dom=require("../../tools/dom"),_log=require("../../tools/log"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_props=_interopRequireDefault(require("../../table/src/props")),_emits=_interopRequireDefault(require("../../table/src/emits")),_size=require("../../hooks/size"),_event=require("../../tools/event"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__spreadArray=function(e,t,o){if(o||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||((r=r||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},tableComponentPropKeys=Object.keys(_props.default),tableComponentMethodKeys=["clearAll","syncData","updateData","loadData","reloadData","reloadRow","loadColumn","reloadColumn","getRowNode","getColumnNode","getRowIndex","getVTRowIndex","getVMRowIndex","getColumnIndex","getVTColumnIndex","getVMColumnIndex","createData","createRow","revertData","clearData","isInsertByRow","isUpdateByRow","getColumns","getColumnById","getColumnByField","getTableColumn","getData","getCheckboxRecords","getParentRow","getRowSeq","getRowById","getRowid","getTableData","hideColumn","showColumn","resetColumn","refreshColumn","refreshScroll","recalculate","closeTooltip","isAllCheckboxChecked","isAllCheckboxIndeterminate","getCheckboxIndeterminateRecords","setCheckboxRow","isCheckedByCheckboxRow","isIndeterminateByCheckboxRow","toggleCheckboxRow","setAllCheckboxRow","getRadioReserveRecord","clearRadioReserve","getCheckboxReserveRecords","clearCheckboxReserve","toggleAllCheckboxRow","clearCheckboxRow","setCurrentRow","isCheckedByRadioRow","setRadioRow","clearCurrentRow","clearRadioRow","getCurrentRecord","getRadioRecord","getCurrentColumn","setCurrentColumn","clearCurrentColumn","sort","clearSort","isSort","getSortColumns","closeFilter","isFilter","isRowExpandLoaded","clearRowExpandLoaded","reloadRowExpand","reloadRowExpand","toggleRowExpand","setAllRowExpand","setRowExpand","isExpandByRow","clearRowExpand","clearRowExpandReserve","getRowExpandRecords","getTreeExpandRecords","isTreeExpandLoaded","clearTreeExpandLoaded","reloadTreeExpand","reloadTreeChilds","toggleTreeExpand","setAllTreeExpand","setTreeExpand","isTreeExpandByRow","clearTreeExpand","clearTreeExpandReserve","getScroll","scrollTo","scrollToRow","scrollToColumn","clearScroll","updateFooter","updateStatus","setMergeCells","removeInsertRow","removeMergeCells","getMergeCells","clearMergeCells","setMergeFooterItems","removeMergeFooterItems","getMergeFooterItems","clearMergeFooterItems","openTooltip","focus","blur","connect"],gridComponentEmits=__spreadArray(__spreadArray([],_emits.default,!0),["page-change","form-submit","form-submit-invalid","form-reset","form-collapse","form-toggle-collapse","proxy-query","proxy-delete","proxy-save","toolbar-button-click","toolbar-tool-click","zoom"],!1),_default=(0,_vue.defineComponent)({name:"VxeGrid",props:__assign(__assign({},_props.default),{columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:function(){return _conf.default.grid.size||_conf.default.size}}}),emits:gridComponentEmits,setup:function(H,e){function t(e){var t={};return e.forEach(function(r){t[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=Y.value;if(o&&o[r])return o[r].apply(o,e)}}),t}function g(t){var e=Q.pendingRecords,o=H.rowClassName,r=[];return e.some(function(e){return e===t.row})&&r.push("row--pending"),r.push(o?_xeUtils.default.isFunction(o)?o(t):o:""),r}function O(e){var t=H.editConfig,o=Q.pendingRecords,r=Y.value,t=t?t.beforeEditMethod||t.activeMethod:null;return-1===r.findRowIndexOf(o,e.row)&&(!t||t(__assign(__assign({},e),{$grid:oe})))}function a(){(0,_vue.nextTick)(function(){var e=Y.value,t=m.value;e&&t&&e.connect(t)})}function o(){var e=Q.tablePage,t=H.pagerConfig,o=(r=y.value).currentPage,r=r.pageSize;t&&(o&&(e.currentPage=o),r)&&(e.pageSize=r)}function K(e,t){var o,r=void 0===(r=W.value.props)?{}:r;return(o=e&&r.message?_xeUtils.default.get(e,r.message):o)||_conf.default.i18n(t)}function G(e,t,o){var r=ee.value,n=J.getCheckboxRecords();if(r){if(n.length)return _vXETable.VXETable.modal.confirm({id:"cfm_".concat(e),content:_conf.default.i18n(t),escClosable:!0}).then(function(e){if("confirm"===e)return o()});"development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:"msg_".concat(e),content:_conf.default.i18n("vxe.grid.selectOneRecord"),status:"warning"})}else n.length&&o();return Promise.resolve()}function r(e){var t=Q.isZMax;return(e?!t:t)&&(Q.isZMax=!t,Q.tZindex<(0,_utils.getLastZIndex)())&&(Q.tZindex=(0,_utils.nextZIndex)()),(0,_vue.nextTick)().then(function(){return J.recalculate(!0)}).then(function(){return Q.isZMax})}function n(){var n,e=H.proxyConfig,t=H.formConfig,o=Q.proxyInited,r=W.value,a=R.value;e&&((0,_utils.isEnableConf)(t)&&r.form&&a.items&&(n={},a.items.forEach(function(e){var t,o=e.field,r=e.itemRender;o&&(t=null,r&&(r=r.defaultValue,_xeUtils.default.isFunction(r)?t=r({item:e}):_xeUtils.default.isUndefined(r)||(t=r)),n[o]=t)}),Q.formData=n),o||!(Q.proxyInited=!0)!==r.autoLoad&&(0,_vue.nextTick)().then(function(){return re.commitProxy("_init")}).then(function(e){re.dispatchEvent("proxy-query",__assign(__assign({},e),{isInited:!0}),new Event("init"))}))}function c(e){var t=l.value;(0,_event.hasEventKey)(e,_event.EVENT_KEYS.ESCAPE)&&Q.isZMax&&!1!==t.escRestore&&s.triggerZoomEvent(e)}var f=e.slots,i=e.emit,d=_xeUtils.default.uniqueId(),M=(0,_vue.getCurrentInstance)(),D=(0,_size.useSize)(H),Q=(0,_vue.reactive)({tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],pendingRecords:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:_conf.default.pager.pageSize||10,currentPage:1}}),v=(0,_vue.ref)(),Y=(0,_vue.ref)(),p=(0,_vue.ref)(),m=(0,_vue.ref)(),_=(0,_vue.ref)(),x=(0,_vue.ref)(),b=(0,_vue.ref)(),h=(0,_vue.ref)(),E=(0,_vue.ref)(),C=(0,_vue.ref)(),J=t(tableComponentMethodKeys),W=(tableComponentMethodKeys.forEach(function(r){J[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=Y.value;if(o&&o[r])return o&&o[r].apply(o,e)}}),(0,_vue.computed)(function(){return Object.assign({},_conf.default.grid.proxyConfig,H.proxyConfig)})),ee=(0,_vue.computed)(function(){return!1!==W.value.message}),y=(0,_vue.computed)(function(){return Object.assign({},_conf.default.grid.pagerConfig,H.pagerConfig)}),R=(0,_vue.computed)(function(){return Object.assign({},_conf.default.grid.formConfig,H.formConfig)}),te=(0,_vue.computed)(function(){return Object.assign({},_conf.default.grid.toolbarConfig,H.toolbarConfig)}),l=(0,_vue.computed)(function(){return Object.assign({},_conf.default.grid.zoomConfig,H.zoomConfig)}),P=(0,_vue.computed)(function(){return Q.isZMax?{zIndex:Q.tZindex}:null}),k=(0,_vue.computed)(function(){var t={},o=H;return tableComponentPropKeys.forEach(function(e){t[e]=o[e]}),t}),q={refElem:v,refTable:Y,refForm:p,refToolbar:m,refPager:_},S={computeProxyOpts:W,computePagerOpts:y,computeFormOpts:R,computeToolbarOpts:te,computeZoomOpts:l},oe={xID:d,props:H,context:e,instance:M,reactData:Q,getRefMaps:function(){return q},getComputeMaps:function(){return S}},re={},V=(0,_vue.computed)(function(){var e=H.seqConfig,t=H.pagerConfig,o=H.loading,r=H.editConfig,n=H.proxyConfig,a=Q.isZMax,i=Q.tableLoading,l=Q.tablePage,s=Q.tableData,u=k.value,c=W.value,d=Object.assign({},u);return a&&(u.maxHeight?d.maxHeight="auto":d.height="auto"),n&&(d.loading=o||i,d.data=s,d.rowClassName=g,c.seq)&&(0,_utils.isEnableConf)(t)&&(d.seqConfig=Object.assign({},e,{startIndex:(l.currentPage-1)*l.pageSize})),r&&(d.editConfig=Object.assign({},r,{beforeEditMethod:O})),d}),I=function(t){var e=H.proxyConfig,o=Q.tablePage,r=t.currentPage,n=t.pageSize;o.currentPage=r,o.pageSize=n,re.dispatchEvent("page-change",t),e&&re.commitProxy("query").then(function(e){re.dispatchEvent("proxy-query",e,t.$event)})},N=function(t){var e=Y.value,o=H.proxyConfig;e.getComputeMaps().computeSortOpts.value.remote&&(Q.sortData=t.sortList,o)&&(Q.tablePage.currentPage=1,re.commitProxy("query").then(function(e){re.dispatchEvent("proxy-query",e,t.$event)})),re.dispatchEvent("sort-change",t)},X=function(t){var e=Y.value,o=H.proxyConfig;e.getComputeMaps().computeFilterOpts.value.remote&&(Q.filterData=t.filterList,o)&&(Q.tablePage.currentPage=1,re.commitProxy("query").then(function(e){re.dispatchEvent("proxy-query",e,t.$event)})),re.dispatchEvent("filter-change",t)},L=function(t){H.proxyConfig&&re.commitProxy("reload").then(function(e){re.dispatchEvent("proxy-query",__assign(__assign({},e),{isReload:!0}),t.$event)}),re.dispatchEvent("form-submit",t)},U=function(t){H.proxyConfig&&re.commitProxy("reload").then(function(e){re.dispatchEvent("proxy-query",__assign(__assign({},e),{isReload:!0}),t.$event)}),re.dispatchEvent("form-reset",t)},z=function(e){re.dispatchEvent("form-submit-invalid",e)},j=function(e){(0,_vue.nextTick)(function(){return J.recalculate(!0)}),re.dispatchEvent("form-toggle-collapse",e),re.dispatchEvent("form-collapse",e)},T=function(e,t){e=e[t];if(e){if(!_xeUtils.default.isString(e))return e;if(f[e])return f[e];"development"===process.env.NODE_ENV&&(0,_log.errLog)("vxe.error.notSlot",[e])}return null},w={},re=(_emits.default.forEach(function(o){var e=_xeUtils.default.camelCase("on-".concat(o));w[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(void 0,__spreadArray([o],e,!1))}}),{dispatchEvent:function(e,t,o){i(e,Object.assign({$grid:oe,$event:o},t))},commitProxy:function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var r,n,a,i,I=H.toolbarConfig,l=H.pagerConfig,N=H.editRules,s=Q.tablePage,X=Q.formData,u=ee.value,c=W.value,L=te.value,U=c.beforeQuery,z=c.afterQuery,j=c.beforeDelete,F=c.afterDelete,Z=c.beforeSave,$=c.afterSave,d=c.ajax,g=void 0===d?{}:d,d=c.props,f=void 0===d?{}:d,v=Y.value,p=null,m=null,_=(m=_xeUtils.default.isString(t)?(c=L.buttons,p=(d=I&&c?_xeUtils.default.findTree(c,function(e){return e.code===t},{children:"dropdowns"}):null)?d.item:null,t):(p=t).code,p?p.params:null);switch(m){case"insert":return v.insert({});case"insert_actived":return v.insert({}).then(function(e){e=e.row;return v.setEditRow(e)});case"mark_cancel":b=m,a=Q.pendingRecords,x=ee.value,i=Y.value,(C=i.getCheckboxRecords()).length?(r=[],n=[],C.forEach(function(t){(a.some(function(e){return t===e})?n:r).push(t)}),n.length?Q.pendingRecords=a.filter(function(e){return-1===i.findRowIndexOf(n,e)}).concat(r):r.length&&(Q.pendingRecords=a.concat(r)),J.clearCheckboxRow()):x&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:b,content:_conf.default.i18n("vxe.grid.selectOneRecord"),status:"warning"}));break;case"remove":return G(m,"vxe.grid.removeSelectRecord",function(){return v.removeCheckboxRow()});case"import":v.importData(_);break;case"open_import":v.openImport(_);break;case"export":v.exportData(_);break;case"open_export":v.openExport(_);break;case"reset_custom":return v.resetColumn(!0);case"_init":case"reload":case"query":var x,b,h,E,C=g.query;if(C)return x="_init"===m,b="reload"===m,V=[],h=[],q={},l&&((x||b)&&(s.currentPage=1),(0,_utils.isEnableConf)(l))&&(q=__assign({},s)),x?((P=v.getComputeMaps().computeSortOpts.value.defaultSort)&&(V=(P=_xeUtils.default.isArray(P)?P:[P]).map(function(e){return{field:e.field,property:e.field,order:e.order}})),h=v.getCheckedFilters()):b?(Q.pendingRecords=[],v.clearAll()):(V=v.getSortColumns(),h=v.getCheckedFilters()),P={code:m,button:p,isInited:x,isReload:b,$grid:oe,page:q,sort:V.length?V[0]:{},sorts:V,filters:h,form:X,options:C},Q.sortData=V,Q.filterData=h,Q.tableLoading=!0,E=[P].concat(e),Promise.resolve((U||C).apply(void 0,E)).then(function(e){var t;return Q.tableLoading=!1,e?(0,_utils.isEnableConf)(l)?(t=_xeUtils.default.get(e,f.total||"page.total")||0,s.total=_xeUtils.default.toNumber(t),Q.tableData=_xeUtils.default.get(e,f.result||"result")||[],t=Math.max(Math.ceil(t/s.pageSize),1),s.currentPage>t&&(s.currentPage=t)):Q.tableData=(f.list?_xeUtils.default.get(e,f.list):e)||[]:Q.tableData=[],z&&z.apply(void 0,E),{status:!0}}).catch(function(){return{status:!1}});"development"===process.env.NODE_ENV&&(0,_log.errLog)("vxe.error.notFunc",["proxy-config.ajax.query"]);break;case"delete":var y=g.delete;if(y){var R=J.getCheckboxRecords(),T=R.filter(function(e){return!v.isInsertByRow(e)}),A=[P={$grid:oe,code:m,button:p,body:{removeRecords:T},options:y}].concat(e);if(R.length)return G(m,"vxe.grid.deleteSelectRecord",function(){return T.length?(Q.tableLoading=!0,Promise.resolve((j||y).apply(void 0,A)).then(function(e){return Q.tableLoading=!1,Q.pendingRecords=Q.pendingRecords.filter(function(e){return-1===v.findRowIndexOf(T,e)}),u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({content:K(e,"vxe.grid.delSuccess"),status:"success"})),F?F.apply(void 0,A):re.commitProxy("query"),{status:!0}}).catch(function(e){return Q.tableLoading=!1,u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal.message||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:m,content:K(e,"vxe.grid.operError"),status:"error"})),{status:!1}})):v.remove(R)});u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:m,content:_conf.default.i18n("vxe.grid.selectOneRecord"),status:"warning"}))}else"development"===process.env.NODE_ENV&&(0,_log.errLog)("vxe.error.notFunc",["proxy-config.ajax.delete"]);break;case"save":var w,O,B,M,D,P,k,q,S=g.save;if(S)return w=Object.assign({pendingRecords:Q.pendingRecords},v.getRecordset()),O=w.insertRecords,B=w.removeRecords,M=w.updateRecords,D=w.pendingRecords,k=[P={$grid:oe,code:m,button:p,body:w,options:S}].concat(e),O.length&&(w.pendingRecords=D.filter(function(e){return-1===v.findRowIndexOf(O,e)})),D.length&&(w.insertRecords=O.filter(function(e){return-1===v.findRowIndexOf(D,e)})),q=Promise.resolve(),(q=N?v.validate(w.insertRecords.concat(M)):q).then(function(e){if(!e)return w.insertRecords.length||B.length||M.length||w.pendingRecords.length?(Q.tableLoading=!0,Promise.resolve((Z||S).apply(void 0,k)).then(function(e){return Q.tableLoading=!1,Q.pendingRecords=[],u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({content:K(e,"vxe.grid.saveSuccess"),status:"success"})),$?$.apply(void 0,k):re.commitProxy("query"),{status:!0}}).catch(function(e){return Q.tableLoading=!1,u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:m,content:K(e,"vxe.grid.operError"),status:"error"})),{status:!1}})):void(u&&("development"!==process.env.NODE_ENV||_vXETable.VXETable.modal||(0,_log.errLog)("vxe.error.reqModule",["Modal"]),_vXETable.VXETable.modal.message({id:m,content:_conf.default.i18n("vxe.grid.dataUnchanged"),status:"info"})))});"development"===process.env.NODE_ENV&&(0,_log.errLog)("vxe.error.notFunc",["proxy-config.ajax.save"]);break;default:var V=_vXETable.VXETable.commands.get(m);V&&V.apply(void 0,__spreadArray([{code:m,button:p,$grid:oe,$table:v}],e,!1))}return(0,_vue.nextTick)()},zoom:function(){return Q.isZMax?re.revert():re.maximize()},isMaximized:function(){return Q.isZMax},maximize:function(){return r(!0)},revert:function(){return r()},getFormItems:function(e){var t=R.value,o=H.formConfig,t=t.items,r=[];return _xeUtils.default.eachTree((0,_utils.isEnableConf)(o)&&t?t:[],function(e){r.push(e)},{children:"children"}),_xeUtils.default.isUndefined(e)?r:r[e]},getPendingRecords:function(){return Q.pendingRecords},getProxyInfo:function(){var e;return H.proxyConfig?(e=Q.sortData,{data:Q.tableData,filter:Q.filterData,form:Q.formData,sort:e.length?e[0]:{},sorts:e,pager:Q.tablePage,pendingRecords:Q.pendingRecords}):null}}),s=("development"===process.env.NODE_ENV&&(re.loadColumn=function(e){var t=Y.value;return _xeUtils.default.eachTree(e,function(e){e.slots&&_xeUtils.default.each(e.slots,function(e){_xeUtils.default.isFunction(e)||f[e]||(0,_log.errLog)("vxe.error.notSlot",[e])})}),t.loadColumn(e)},re.reloadColumn=function(e){return J.clearAll(),re.loadColumn(e)}),{extendTableMethods:t,callSlot:function(e,t){return e&&(_xeUtils.default.isString(e)&&(e=f[e]||null),_xeUtils.default.isFunction(e))?(0,_vn.getSlotVNs)(e(t)):[]},getExcludeHeight:function(){var e=H.height,t=Q.isZMax,o=v.value,r=x.value,n=b.value,a=h.value,i=E.value,l=C.value;return(t||"auto"!==e?0:(0,_dom.getPaddingTopBottomSize)(o.parentNode))+(0,_dom.getPaddingTopBottomSize)(o)+(0,_dom.getOffsetHeight)(r)+(0,_dom.getOffsetHeight)(n)+(0,_dom.getOffsetHeight)(a)+(0,_dom.getOffsetHeight)(i)+(0,_dom.getOffsetHeight)(l)},getParentHeight:function(){var e=v.value;return e?(Q.isZMax?(0,_dom.getDomNode)().visibleHeight:_xeUtils.default.toNumber(getComputedStyle(e.parentNode).height))-s.getExcludeHeight():0},triggerToolbarCommitEvent:function(e,t){var o=e.code;return re.commitProxy(e,t).then(function(e){o&&e&&e.status&&["query","reload","delete","save"].includes(o)&&re.dispatchEvent("delete"===o||"save"===o?"proxy-".concat(o):"proxy-query",__assign(__assign({},e),{isReload:"reload"===o}),t)})},triggerToolbarBtnEvent:function(e,t){s.triggerToolbarCommitEvent(e,t),re.dispatchEvent("toolbar-button-click",{code:e.code,button:e},t)},triggerToolbarTolEvent:function(e,t){s.triggerToolbarCommitEvent(e,t),re.dispatchEvent("toolbar-tool-click",{code:e.code,tool:e,$event:t})},triggerZoomEvent:function(e){re.zoom(),re.dispatchEvent("zoom",{type:Q.isZMax?"max":"revert"},e)}}),u=(Object.assign(oe,J,re,s),(0,_vue.ref)(0));(0,_vue.watch)(function(){return H.columns?H.columns.length:-1},function(){u.value++}),(0,_vue.watch)(function(){return H.columns},function(){u.value++}),(0,_vue.watch)(u,function(){(0,_vue.nextTick)(function(){return oe.loadColumn(H.columns||[])})}),(0,_vue.watch)(function(){return H.toolbarConfig},function(e){e&&a()}),(0,_vue.watch)(function(){return H.pagerConfig},function(){o()}),(0,_vue.watch)(function(){return H.proxyConfig},function(){n()}),_vXETable.VXETable.hooks.forEach(function(e){var e=e.setupGrid;e&&(e=e(oe))&&_xeUtils.default.isObject(e)&&Object.assign(oe,e)}),o(),(0,_vue.onMounted)(function(){(0,_vue.nextTick)(function(){var e=H.data,t=H.columns,o=H.proxyConfig,r=W.value,n=R.value;o&&(e||r.form&&n.data)&&(0,_log.errLog)("vxe.error.errConflicts",["grid.data","grid.proxy-config"]),t&&t.length&&oe.loadColumn(t),a()}),_event.GlobalEvent.on(oe,"keydown",c)}),(0,_vue.onUnmounted)(function(){_event.GlobalEvent.off(oe,"keydown")}),(0,_vue.nextTick)(function(){n()});return oe.renderVN=function(){var e,t,o,r,n,a,i,l,s,u,c=D.value,d=P.value;return(0,_vue.h)("div",{ref:v,class:["vxe-grid",((i={})["size--".concat(c)]=c,i["is--animat"]=!!H.animat,i["is--round"]=H.round,i["is--maximize"]=Q.isZMax,i["is--loading"]=H.loading||Q.tableLoading,i)],style:d},(c=H.formConfig,i=H.proxyConfig,d=Q.formData,l=W.value,s=R.value,u=[],((0,_utils.isEnableConf)(c)||f.form)&&(c=[],f.form?c=f.form({$grid:oe}):s.items&&(n={},s.inited||(s.inited=!0,a=l.beforeItem,l&&a&&s.items.forEach(function(e){a({$grid:oe,item:e})})),s.items.forEach(function(e){_xeUtils.default.each(e.slots,function(e){_xeUtils.default.isFunction(e)||f[e]&&(n[e]=f[e])})}),c.push((0,_vue.h)((0,_vue.resolveComponent)("vxe-form"),__assign(__assign({ref:p},Object.assign({},s,{data:i&&l.form?d:s.data})),{onSubmit:L,onReset:U,onSubmitInvalid:z,onCollapse:j}),n))),u.push((0,_vue.h)("div",{ref:x,class:"vxe-grid--form-wrapper"},c))),u.concat((i=H.toolbarConfig,l=te.value,d=[],((0,_utils.isEnableConf)(i)||f.toolbar)&&(i=[],f.toolbar?i=f.toolbar({$grid:oe}):(c=s=void 0,u={},(r=l.slots)&&(s=T(r,"buttons"),c=T(r,"tools"),s&&(u.buttons=s),c)&&(u.tools=c),i.push((0,_vue.h)((0,_vue.resolveComponent)("vxe-toolbar"),__assign({ref:m},l),u))),d.push((0,_vue.h)("div",{ref:b,class:"vxe-grid--toolbar-wrapper"},i))),d),f.top?[(0,_vue.h)("div",{ref:h,class:"vxe-grid--top-wrapper"},f.top({$grid:oe}))]:[],(r=H.proxyConfig,s=V.value,c=W.value,l=Object.assign({},w),t=f.empty,o=f.loading,r&&(c.sort&&(l.onSortChange=N),c.filter)&&(l.onFilterChange=X),r={},t&&(r.empty=function(){return t({})}),o&&(r.loading=function(){return o({})}),[(0,_vue.h)((0,_vue.resolveComponent)("vxe-table"),__assign(__assign({ref:Y},s),l),r)]),f.bottom?[(0,_vue.h)("div",{ref:E,class:"vxe-grid--bottom-wrapper"},f.bottom({$grid:oe}))]:[],(u=H.pagerConfig,i=y.value,d=[],((0,_utils.isEnableConf)(u)||f.pager)&&(u=[],f.pager?u=f.pager({$grid:oe}):(c={},l=s=void 0,(e=i.slots)&&(s=T(e,"left"),l=T(e,"right"),s&&(c.left=s),l)&&(c.right=l),u.push((0,_vue.h)((0,_vue.resolveComponent)("vxe-pager"),__assign(__assign(__assign({ref:_},i),H.proxyConfig?Q.tablePage:{}),{onPageChange:I}),c))),d.push((0,_vue.h)("div",{ref:C,class:"vxe-grid--pager-wrapper"},u))),d))))},(0,_vue.provide)("$xegrid",oe),oe},render:function(){return this.renderVN()}});exports.default=_default;